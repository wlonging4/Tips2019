function bodyScroll(){loanAgreement.bodyScroll()}var loanAgreement={productId:header.getQueryString("productId")?header.getQueryString("productId"):"",token:header.getQueryString("token")?header.getQueryString("token"):"",terminal:header.getQueryString("token")?"APP":"WAP",protocolType:header.getQueryString("protocolType")?header.getQueryString("protocolType"):3,init:function(e){this.urlValueJson(),this.appendBox=e.appendBox,this.wapBindClick(),this.agreementLoad(3)},aprotocolTypeNum:0,aprotocolTypeArr:[15,16,8,18,1,9,3],dataProcessing:function(e){},agreementLoad:function(e){var r=this,o=r.aprotocolTypeArr[r.aprotocolTypeNum];r.bodyScrollUnBind(),$.ajax({url:"/prototolapi/prototol/"+r.productId,type:"get",async:!0,cache:!1,data:{protocolType:o,terminal:r.terminal,token:r.token},dataType:"JSON",success:function(e){"1"==e.code&&r.ajaxCallBackSucc(e)},error:function(e){}})},ajaxCallBackSucc:function(e){var r=this,o=r.aprotocolTypeArr[r.aprotocolTypeNum];if(e.data){var t=document.createElement("div");t.className="agreement"+o;var n="";e.data.jiekuanContent?n=e.data.jiekuanContent:e.data.zhaiquanContent?n=e.data.zhaiquanContent:e.data.protocolContent&&(n=e.data.protocolContent),t.innerHTML=n,r.appendBox.appendChild(t),r.aprotocolTypeNum=r.aprotocolTypeNum+1,r.aprotocolTypeNum==r.aprotocolTypeArr.length?r.bottomLoadHide():r.bodyScrollBind()}},wapBindClick:function(){var e=this,r=header.getQueryString("type");if("wap"==r){var o=document.querySelector(".js_btnOK");o.setAttribute("href","javascript:void(0);"),o.addEventListener("click",function(){e.btnClickFn()},!1)}},replaceArr:["amount","reDay","eachMonthRe","money2","earning"],urlReplaceJson:[],urlValueJson:function(){for(var e=this,r=0;r<e.replaceArr.length;r++)e.urlReplaceJson.push({key:e.replaceArr[r],val:header.getQueryString(e.replaceArr[r])}),"amount"==e.replaceArr[r]&&e.urlReplaceJson.push({key:"ownedamount",val:header.getQueryString(e.replaceArr[r])})},replaceUrl:function(currentURL){for(var self=this,i=0;i<self.urlReplaceJson.length;i++){var arg=self.urlReplaceJson[i].key,val=self.urlReplaceJson[i].val;if(null!=val&&void 0!=val){var pattern="[&|?]"+arg+"=([^&]*)",replaceText=arg+"="+val;currentURL=currentURL.match(pattern)?currentURL.replace(eval("/("+arg+"=)([^&]*)/gi"),replaceText):currentURL.match("[?]")?currentURL+"&"+replaceText:currentURL+"?"+replaceText}}return currentURL},urlProcessing:function(e){var r=document.referrer,o=new RegExp("(^|&)"+e+"=([^&]*)");r=r.replace(o,""),this.historyUrl=r},btnClickFn:function(){var e=document.referrer;e=this.replaceUrl(e);var r=e+"&checkActive=true";location.href=r},bottomLoadShow:function(){$(".loadingBox").removeClass("hide"),$(".loadingBox").addClass("show")},bottomLoadHide:function(){$(".loadingBox").removeClass("show"),$(".loadingBox").addClass("hide")},bodyScroll:function(){var e=this;loanAgreement.bottomLoadShow();var r=document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop,o=document.documentElement.scrollHeight,t=document.documentElement.clientHeight;r+t>o-150&&loanAgreement.agreementLoad(e.pageNum)},bodyScrollBind:function(){document.addEventListener("scroll",bodyScroll,!1)},bodyScrollUnBind:function(){document.removeEventListener("scroll",bodyScroll,!1)}};window.onload=function(){var e=document.querySelector(".argeementMain");loanAgreement.init({appendBox:e})};