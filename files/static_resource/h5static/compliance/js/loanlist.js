function bodyScroll(){loanlist.bodyScroll()}var loanlist={init:function(o){this.listBoxObj=o,this.pageNum=1,this.totalPage,this.borrowLoansList(1)},dataProcessing:function(o){var t=[{borrowerTypeCode:"借款人类型",type:""},{borrowerName:"借款人",type:""},{loanPurpose:"借款用途",type:""},{loanAmount:"借款金额",type:""}];t=t.filter(0==o.borrowerTypeCode?function(o){return"1"!==o.type}:function(o){return"0"!==o.type});var e=["自然人","法人或其他组织"];o.borrowerTypeCode=e[o.borrowerTypeCode];for(var n=[],a={},r=0;r<t.length;r++)$.each(t[r],function(e,a){if("type"!=e){var l=t[r],i=l[e],s=null==o[e]?"保密":o[e];"loanAmount"!=e||isNaN(s)||(s=parseFloat(s).toFixed(2)),"loanAmount"!=e||isNaN(s)||(s+="元"),n.push({title:i,word:s})}});return a={id:o.id,data:n}},borrowLoansListHtml:function(o){var t=this,e=[];$.each(o,function(n,a){e.push(t.dataProcessing(o[n]))});for(var n="",a=0;a<o.length;a++){var r=e[a].id,l=loan.getQueryString("type")?loan.getQueryString("type"):"",i=loan.getQueryString("storeCode")?loan.getQueryString("storeCode"):"";n+='<a href="/h5static/compliance/page/loanDetails.html?borrowerid='+r+"&type="+l+"&storeCode="+i+'">',n+='<div class="item">',n+="			<ul>",$.each(e[a].data,function(o,t){n+="<li>",n+='	<span class="tit">'+t.title+":&nbsp;</span>",n+='	<span class="word">'+t.word+"</span>",n+="</li>"}),n+="				</ul>",n+='				<div class="arrowIcon"></div>',n+="			</div>",n+="		</a>"}return n},borrowLoansList:function(o){var t=this,e={pageNo:t.pageNum,pageSize:20};t.pageNum!=t.totalPage&&(t.bodyScrollUnBind(),loan.loadingShow(),$.ajax({url:"/webapi/borrowLoans/borrowLoansList",type:"POST",async:!0,cache:!1,dataType:"JSON",data:e,success:function(o){if(loan.loadingHidden(),"1"==o.code){o=o.data;var e=t.borrowLoansListHtml(o.results);t.pageNum=parseInt(o.pageNo)+1,t.listBoxObj.append(e),o.pageNo==o.totalPage?t.bottomLoadHide():loanlist.bodyScrollBind()}else loan.msgDialog(o.msg)},error:function(o){loan.loadingHidden(),loan.msgDialog(o)}}))},bottomLoadShow:function(){$(".loadingBox").removeClass("hide"),$(".loadingBox").addClass("show")},bottomLoadHide:function(){$(".loadingBox").removeClass("show"),$(".loadingBox").addClass("hide")},bodyScroll:function(){var o=this;o.bottomLoadShow();var t=document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop,e=document.documentElement.scrollHeight,n=document.documentElement.clientHeight;t+n>e-60&&o.borrowLoansList(o.pageNum)},bodyScrollBind:function(){document.addEventListener("scroll",bodyScroll,!1)},bodyScrollUnBind:function(){document.removeEventListener("scroll",bodyScroll,!1)}};$(document).ready(function(){loanlist.init($(".loanList"))});