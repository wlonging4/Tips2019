function dialogShowBox(action){var actionObj=eval(action+"Dialog");actionObj.show()}function delMemberFn(a){captainInviteList.delMember(a)}function loadAfter(){statu1Dialog=new Dialog({dialogBox:dialogDom,statuClass:"statu1"}),statu2Dialog=new Dialog({dialogBox:dialogDom,statuClass:"statu2"}),statu3Dialog=new Dialog({dialogBox:dialogDom,statuClass:"statu3"}),statu4Dialog=new Dialog({dialogBox:dialogDom,statuClass:"statu4"})}function captainAddMemberLink(){var a=document.querySelector(".captainAddMember"),t="captainAddMember.html?userid="+appUserId+"&phoneNumber="+appPhoneNumber+"&token="+token;a.setAttribute("href",t)}function getUerCallBack(){onloadNum=parseInt(getCookie("onloadNum"))+1,setCookie("onloadNum",onloadNum),captainAddMemberLink(),captainInviteList.init()}var captainInviteList={statuClickBtn:function(){var a=arguments[0],t=a.memberstatus,i=(a.cardbank,a.code?a.code:""),e=a.docvalidated?a.docvalidated:"",n=a.cardbank?"1":"0",s=e?"1":"";statuClickBtn={10:'<span onclick="share('+a.membermobile+');">邀请</span>',20:'<span class="js_statu"  data-statu="statu1" onclick="dialogShowBox(\'statu1\');">请使用入驻码：'+i+"开通</span>",201:'<span class="js_statu"  data-statu="statu2" onclick="dialogShowBox(\'statu2\');" >请使用入驻码：'+i+"开通</span>",30:'<span class="js_statu" data-statu="statu3"  onclick="dialogShowBox(\'statu3\');">未绑定银行卡</span>',31:'<span class="js_statu" data-statu="statu4" onclick="dialogShowBox(\'statu4\');" >已绑定银行卡</span>',40:'<span class="js_del" data-memberid="'+a.id+'" onclick="delMemberFn('+a.id+');" >删除</span>'};var o=t+n+s+"",l=statuClickBtn[o];return l},phoneAsterisk:function(a){var t=a.substr(0,3)+"****"+a.substr(7);return t},listHtml:function(a){var t=this,i={1:"已经邀请未注册",2:"已注册，未开通工作室",3:"已开通工作室",4:"已加入其他团队"},e=[];return a.forEach(function(a){var n=a,s=['<div class="item memberid'+n.id+'">','		<div class="itemCon">','			<div class="imgBox">','				<img src="'+(n.avatar?n.avatar:"../../financialPlanner/images/captainInvite/defaultHeadPortrait.png")+'" alt="头像">',"			</div>","		</div>",'		<div class="itemCon">','			<div class="nickName">'+n.membername+"</div>",'			<div class="phoneNum">'+t.phoneAsterisk(n.membermobile)+"</div>","		</div>",'		<div class="itemCon">','			<div class="inviteStatus">'+i[n.memberstatus]+"</div>",'			<div class="inviteAction">'+t.statuClickBtn(n)+"</div>","		</div>","	</div>"].join("");e.push(s)}),e.join("")},listLoad:function(){var a=this,t=document.querySelector(".header"),i=document.querySelector(".inviteList");Loading.show(),$.ajax({url:"/managerteam/api/list.json?token="+token,type:"get",async:!0,dataType:"JSON",cache:!1,success:function(e){if(Loading.hide(),"1"==e.code){var n=a.captainInfoHtml(e.data);t.innerHTML=n;var s=a.listHtml(e.data.list);i.innerHTML=s,loadAfter()}},error:function(a){Loading.hide()}})},delMember:function(a){document.querySelector(".inviteList");Loading.show(),$.ajax({url:"/managerteam/api/delete.json",type:"post",data:{id:a},async:!0,dataType:"JSON",cache:!1,success:function(t){Loading.hide(),"1"==t.code&&$(".memberid"+a).remove()},error:function(a){Loading.hide()}})},captainInfoHtml:function(a){realnameStr=a.realname,setCookie("realnameStr",realnameStr),nicknameStr=a.nickname?a.nickname:"",setCookie("nicknameStr",nicknameStr);var t=['<div class="headPortrait">','	<div class="imgBox">','		<img src="'+(a.avatar?a.avatar:"../../financialPlanner/images/captainInvite/defaultHeadPortrait.png")+'" alt="头像">',"	</div>",'	<div class="nickName">'+a.realname+"</div>","</div>",'<div class="captainInfo">','	<div class="tit">团队成员 </div>','	<div class="cList">',"		<ul>",'			<li><label>已邀请：</label><div class="numBox"><span class="num">'+(a.membercount?a.membercount:"0")+"</span>&nbsp;人</div></li>",'			<li><label>已开通：</label><div class="numBox"><span class="num">'+(a.hasopenstore?a.hasopenstore:"0")+"</span>&nbsp;人</div></li>","		</ul>","	</div>","</div>"].join("");return t},init:function(){var a=this;a.listLoad()}},statu1Dialog,statu2Dialog,statu3Dialog,statu4Dialog,dialogDom=document.querySelector(".dialogBox");window.onload=function(){setWebTitle("邀请团队成员"),setAppBtn(),getUserInfo(getUerCallBack),Tips.init(),Loading.init(),""!==token&&void 0!==token&&null!==token&&0!=onloadNum&&getUerCallBack()};