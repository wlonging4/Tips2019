function setupWebViewJavascriptBridge(t){if(window.WebViewJavascriptBridge)return t(window.WebViewJavascriptBridge);if(document.addEventListener("WebViewJavascriptBridgeReady",function(){return t(window.WebViewJavascriptBridge)},!1),window.WebViewJavascriptBridge)return t(WebViewJavascriptBridge);if(window.WVJBCallbacks)return window.WVJBCallbacks.push(t);window.WVJBCallbacks=[t];var e=document.createElement("iframe");e.style.display="none",e.src="wvjbscheme://__BRIDGE_LOADED__",document.documentElement.appendChild(e),setTimeout(function(){document.documentElement.removeChild(e)},0)}function setAppBtn(){var t=window.location.host,e="http://"+t+"/h5static/financialPlanner/personalTailor/customRules.html";setupWebViewJavascriptBridge(function(t){t.callHandler("xhShowButton",{titleBack:"1",titleClose:"0",titleWeb:{titleContent:"定制规则",url:e}},function(t){})})}function setNoHasAppBtn(){setupWebViewJavascriptBridge(function(t){t.callHandler("xhShowButton",{smallBell:"0",titleBack:"1",titleClose:"0",titleWeb:{titleContent:"",url:""}},function(t){})})}function callBackBtnCloseWeb(){setupWebViewJavascriptBridge(function(t){t.callHandler("xhNaviGoBack","nativeCloseWeb",function(t){})})}function callBackBtnGoBackWeb(){setupWebViewJavascriptBridge(function(t){t.callHandler("xhNaviGoBack","nativeGoBackWeb",function(t){})})}function callBackBtnGoBackWeb(){setupWebViewJavascriptBridge(function(t){t.callHandler("xhNaviGoBack","nativeGoBackWeb",function(t){})})}function callBackBtnGoBackWebUrl(){var t=window.location.host,e="http://"+t+"/h5static/financialPlanner/personalTailor/personalTailor.html?type=1",i="webOpenUrl-"+e;setupWebViewJavascriptBridge(function(t){t.callHandler("xhNaviGoBack",i,function(t){})})}function callBackBtnGoBackWebEmpty(){var t=window.location.host,e="http://"+t+"/h5static/financialPlanner/personalTailor/personalTailor.html?type=2",i="webOpenUrl-"+e;setupWebViewJavascriptBridge(function(t){t.callHandler("xhNaviGoBack",i,function(t){})})}function callBackBtnGoBackWebStep1(){var t=(window.location.host,"webOpenUrl-"+urlStr);setupWebViewJavascriptBridge(function(e){e.callHandler("xhNaviGoBack",t,function(t){})})}function callBackBtnGoBackWebStep2(){var t=window.location.host,e="http://"+t+"/dev/financialPlanner/personalTailor/personalTailorEdit2.html?type=1",i="webOpenUrl-"+e;setupWebViewJavascriptBridge(function(t){t.callHandler("xhNaviGoBack",i,function(t){})})}function toAppUserManage(){setupWebViewJavascriptBridge(function(t){t.callHandler("xhShowAppUserManage",function(t){})})}function toAppCustomize(){setupWebViewJavascriptBridge(function(t){t.callHandler("xhShowAppCustomize",function(t){})})}function getCustomize(t){var e="";setupWebViewJavascriptBridge(function(i){i.registerHandler("xhGoH5Customize",function(i,n){clearArrCookie(step2ClearCookie);var o=i;return e=JSON.parse(o),lenderId=e.userId?e.userId:e.userid,lenderName=e.userName?e.userName:"未实名",setCookie("lenderId",lenderId),setCookie("lenderName",lenderName),t(),e})})}function setWebTitle(t){setupWebViewJavascriptBridge(function(e){e.callHandler("xhWebTitle",t,function(t){})})}function setCookie(t,e){document.cookie=t+"="+escape(e)}function getCookie(t){var e,i=new RegExp("(^| )"+t+"=([^;]*)(;|$)");return(e=document.cookie.match(i))?unescape(e[2]):null}function clearArrCookie(t){for(var e=0;e<t.length;e++){var i=t[e];setCookie(i,"")}}function getQueryString(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)","i"),i=window.location.search.substr(1).match(e);return null!=i?unescape(i[2]):null}function getByteLen(t){for(var e=0,i=0;i<t.length;i++){var n=t.charAt(i);e+=null!=n.match(/[^\x00-\xff]/gi)?2:1}return e}var selectBox=function(t){this.wrapperClass=t.wrapperClass,this.wrapperBox=document.querySelector(this.wrapperClass),this.dataList=t.dataList,this.trigger=document.querySelector(t.trigger),this.endCallBack=t.endCallBack,this.dialogBox=t.dialogBox?t.dialogBox:"",this.dialogCon=document.querySelector(t.dialogCon),this.changeFn=t.changeFn,this.optionsProductRangeList=[],this.initValueFn=t.initValueFn||function(){},this.scollObj="",this.activeIndex=0,this.init()};selectBox.prototype.init=function(){this.selectObj=this.createSelect(),this.activeIndex=this.selectObj.selectedIndex,this.bindChange(),this.trigger.innerHTML=this.selectObj.options[this.selectObj.selectedIndex].text,this.selectDialog=this.createSelectDialog(),this.dialogCon.appendChild(this.selectDialog),this.wrapperBox.appendChild(this.selectObj),this.selectli=document.querySelectorAll(".selectUL li"),this.bindTriggerClick(),this.bindRadioChange()},selectBox.prototype.createSelect=function(){for(var t=document.createElement("select"),e=[],i=0;i<this.dataList.length;i++){var n={1:"个月",2:"周",3:"天"},o=this.dataList[i],s=o.productCode;this.productCode=s;var a=o.productPeriodUint;this.productPeriodUint=a;var r=o.maxRange,l=o.minRange,c=o.multipleRate,u=o.productPeriod,p=u+(n[a]?n[a]:""),h='<option value="'+s+'" dataUnit="'+a+'" maxRange="'+r+'" minRange="'+l+'"  multipleRate="'+c+'" customPeriod="'+u+'">'+p+"</option>";e.push(h),this.optionsProductRangeList.push(o.productRangeList)}return t.innerHTML=e.join(""),t},selectBox.prototype.createSelectDialog=function(){var t=document.createElement("ul");t.className="selectUL";var e=[],i=this.selectObj;selectDataLenght=i.options.length;for(var n=0;n<selectDataLenght;n++){var o=i.options[n].value,s=i.options[n].text,a='<li data-id="'+o+'"><input type="radio" name="radioName" class="radioClass" value="'+o+'" id="optionId'+n+'" '+(n==this.activeIndex?"checked=checked":"")+' /><label for="optionId'+n+'">'+s+"</label></li>";e.push(a)}return t.innerHTML=e.join(""),t},selectBox.prototype.bindChange=function(){var t=this;t.selectObj.addEventListener("change",function(e){t.change.call(t,e)},!1)},selectBox.prototype.bindTriggerClick=function(){var t=this;t.trigger.addEventListener("click",function(e){t.triggerClick()},!1)},selectBox.prototype.bindRadioChange=function(){for(var t=this,e=0;e<this.selectli.length;e++)this.selectli[e].addEventListener("click",function(){t.setValue(this.getAttribute("data-id")),t.trigger.innerHTML=t.selectObj.options[t.selectObj.selectedIndex].text,t.dialogBox.hide(),t.change()},!1)},selectBox.prototype.radioChange=function(t){},selectBox.prototype.triggerClick=function(){this.dialogBox.show(),this.selectli.length>7&&window.addEventListener&&""==this.scollObj&&(this.dialogCon.classList.add("heightFixed"),this.scollObj=simpScroller(this.dialogCon))},selectBox.prototype.change=function(){this.activeIndex=this.selectObj.selectedIndex,this.activeOption=this.selectObj.options[this.activeIndex],this.changeFn()},selectBox.prototype.setValue=function(t){this.selectObj.value=t},selectBox.prototype.initValue=function(t){var e=this;this.selectObj.value=t,e.trigger.innerHTML=e.selectObj.options[e.selectObj.selectedIndex].text,this.activeIndex=this.selectObj.selectedIndex,this.activeOption=this.selectObj.options[this.activeIndex];var i=document.querySelectorAll(".radioClass");i[this.activeIndex].setAttribute("checked","checked"),e.initValueFn()},selectBox.prototype.initchange=function(){},selectBox.prototype.getValue=function(){return this.selectObj.value},selectBox.prototype.getText=function(){return this.activeOption.innerHTML},selectBox.prototype.getMaxRange=function(){var t=this.activeOption.getAttribute("maxrange");return t=this.numToTenThousand(t)},selectBox.prototype.getMinRange=function(){var t=this.activeOption.getAttribute("minrange");return t=this.numToTenThousand(t)},selectBox.prototype.getMultipleRate=function(t){for(var e=this.optionsProductRangeList[this.activeIndex],i=0;i<e.length;i++){var n=e[i];if(t>=n.minRange&&t<=n.maxRange)return num=n.multipleRate,num}},selectBox.prototype.getValueUnit=function(){return this.activeOption.getAttribute("dataunit")},selectBox.prototype.getCustomPeriod=function(){return this.activeOption.getAttribute("customPeriod")},selectBox.prototype.numToTenThousand=function(t){return t/1e4},selectBox.prototype.numToRate=function(t){return 100*t};var inputBox=function(t){this.wrapperClass=t.wrapperClass,this.wrapperBox=document.querySelector(this.wrapperClass),this.min=t.min,this.max=t.max,this.placeholder=t.placeholder?t.placeholder:"",this.blurFn=t.blurFn,this.focusFn=t.focusFn,this.clearFn=t.clearFn,this.blurValidation=!0,this.init()};inputBox.prototype.init=function(){this.inputObj=this.createInput(),this.bindFocus(),this.bindBlur(),this.wrapperBox.appendChild(this.inputObj),this.inputObj.setAttribute("onkeypress","javascript:if(this.value.length > 15)event.returnValue=false;")},inputBox.prototype.setMin=function(t){this.min=t,this.max=Math.ceil(this.min)},inputBox.prototype.setMax=function(t){this.max=t,this.max=Math.floor(this.max)},inputBox.prototype.createInput=function(){var t=document.createElement("input");return this.placeholder="可定制区间"+this.min+"-"+this.max,t.placeholder=this.placeholder,t.type="number",t.pattern="[0-9]*",t},inputBox.prototype.bindFocus=function(){var t=this;t.inputObj.addEventListener("focus",function(e){t.blurValidation=t.focusFn.call(t,e),t.blurValidation||t.inputObj.blur()},!1)},inputBox.prototype.bindBlur=function(){var t=this;t.inputObj.addEventListener("blur",function(e){t.blurValidation&&t.blur.call(t,e)},!1)},inputBox.prototype.focus=function(){},inputBox.prototype.blur=function(){var t=this.getValue();if(""==t)return this.tips("noNull"),this.blurFn(),void this.valueChange();if(this.minMaxbool())this.setValue(Math.floor(t));else if(t<this.min)this.setValue(this.min),this.tips("min");else{if(!(t>this.max))return this.clear(),this.tips("error"),this.blurFn(),void this.valueChange();this.setValue(this.max),this.tips("max")}this.blurFn(),this.valueChange()},inputBox.prototype.valueChange=function(){var t=this.getValue();""==t&&this.clear()},inputBox.prototype.minMaxbool=function(){var t=this.getValue();return this.inNumBool()&&t>=this.min&&t<=this.max?!0:!1},inputBox.prototype.inNumBool=function(){var t=this.getValue(),e=/^[0-9]+.?[0-9]*$/;return e.test(t)?!0:!1},inputBox.prototype.tips=function(t){switch(t){case"max":Tips.show("定制上限金额"+this.max+"万元");break;case"min":Tips.show("定制最低金额"+this.min+"万元");break;case"error":Tips.show("输入格式错误只能输入正整数");break;case"noNull":Tips.show("定制金额不能为空")}},inputBox.prototype.setValue=function(t){this.inputObj.value=t},inputBox.prototype.getValue=function(){return this.inputObj.value},inputBox.prototype.clear=function(){this.inputObj.value="",this.inputObj.placeholder="可定制区间"+this.min+"-"+this.max,this.clearFn()};var inputObj=function(t){this.inputClass=t.inputClass?t.inputClass:"",this.inputObj=document.querySelector(this.inputClass),this.vipIcon=document.querySelector(".vipClass")?document.querySelector(".vipClass"):new Object,this.blurValidation=!0,this.clearFn=t.clearFn||function(){},this.blurFn=t.blurFn,this.focusFn=t.focusFn,this.init()};inputObj.prototype.init=function(){this.bindFocus(),this.bindKeydown()},inputObj.prototype.bindFocus=function(){var t=this;t.inputObj.addEventListener("focus",function(e){t.blurValidation=t.focusFn.call(t,e),t.blurValidation||t.inputObj.blur()},!1)},inputObj.prototype.bindKeyup=function(){var t=this;t.inputObj.addEventListener("keyup",function(e){t.keyup.call(t,e)},!1)},inputObj.prototype.bindKeydown=function(){var t=this;t.inputObj.addEventListener("keydown",function(e){t.keydown.call(t,e)},!1),t.inputObj.addEventListener("input",function(e){t.keyInput.call(t,e)},!1)},inputObj.prototype.bindBlur=function(){var t=this;t.inputObj.addEventListener("blur",function(e){t.blurValidation&&t.blur.call(t,e)},!1)},inputObj.prototype.keydown=function(){var t=this.getValue();this.valLenght=t.length,varlen=getByteLen(t),varlen=.5*varlen+1,varlen<7&&(varlen=7),t.length>20||(this.inputObj.style.width=varlen+"em",this.validation(),this.blurFn(),this.oldlen=this.valLenght)},inputObj.prototype.keyInput=function(){var t=this.getValue();if(this.valLenght=t.length,varlen=getByteLen(t),varlen=.5*varlen+1,varlen<7&&(varlen=7),!(t.length>20)){this.inputObj.style.width=varlen+"em";var t=this.getValue();t.length>=20&&this.tips("maxSize"),this.blurFn()}},inputObj.prototype.validation=function(){var t=this.getValue(),e=this.oldlen>this.valLenght,i=t.length;t.length>=20?this.tips("maxSize"):e&&4==i&&this.tips("minSize")},inputObj.prototype.blur=function(){this.blurFn()},inputObj.prototype.keyup=function(){this.blurFn()},inputObj.prototype.tips=function(t){switch(t){case"maxSize":Tips.show("产品名称最多20个字 ");break;case"noNull":Tips.show("产品名称不能为空");break;case"minSize":Tips.show("产品名称需要大于4个字")}},inputObj.prototype.setValue=function(t){this.inputObj.value=t;var e=this.inputWidth();this.inputObj.style.width=e+"em"},inputObj.prototype.inputWidth=function(){var t=this.getValue(),e=getByteLen(t);return e=.5*e+1,7>e&&(e=7),e},inputObj.prototype.getValue=function(){return this.inputObj.value},inputObj.prototype.clear=function(){this.inputObj.value="",this.clearFn()},inputObj.prototype.vipShow=function(){this.vipIcon.classList.add("show")},inputObj.prototype.vipHide=function(){this.vipIcon.classList.remove("show")};var wordBox=function(t){this.wrapperClass=t.wrapperClass,this.wrapperBox=document.querySelector(this.wrapperClass),this.clickFn=t.clickFn||function(){},this.bindClick()};wordBox.prototype.bindClick=function(){var t=this;t.wrapperBox.addEventListener("click",function(e){t.clickFn()},!1)},wordBox.prototype.setValue=function(t){this.value=t,this.wrapperBox.innerHTML=t},wordBox.prototype.getValue=function(){return this.value},wordBox.prototype.clear=function(){this.wrapperBox.innerHTML=""};var stepButton=function(t){this.btnClass=t.btnClass,this.btn=document.querySelector(this.btnClass),this.clickFn=t.clickFn||function(){},this.isAvailableFn=t.isAvailableFn||function(){return!0},this.init(),this.isAvailable()};stepButton.prototype.init=function(){},stepButton.prototype.isAvailable=function(){this.isAvailableFn()?(this.enable(),this.bindClickFn()):(this.disabled(),this.unbindClickFn())},stepButton.prototype.disabled=function(){this.btn.classList.add("disabled")},stepButton.prototype.enable=function(){this.btn.classList.remove("disabled")},stepButton.prototype.bindClickFn=function(){var t=this;this.btn.addEventListener("click",t.clickFn,!1)},stepButton.prototype.unbindClickFn=function(){var t=this;this.btn.removeEventListener("click",t.clickFn,!1)};var Dialog=function(t){this.dom=t.dialogBox,this.closeFn=t.closeFn||function(){},this.init()};Dialog.prototype.init=function(){this.bindClose()},Dialog.prototype.bindClose=function(){var t=this,e=t.dom.querySelector(".close");e.addEventListener("click",function(){t.hide(),t.closeFn()})},Dialog.prototype.show=function(){this.dom.classList.add("show")},Dialog.prototype.hide=function(){this.dom.classList.remove("show")};var cookieFn=function(t){this.cookieList=t.cookieList?t.cookieList:[]};cookieFn.prototype.setCookieList=function(){var t=this;list=this.cookieList;for(var e=0;e<this.cookieList.length;e++){var i=list[e];t.setCookie(i.key,i.val)}},cookieFn.prototype.setCookie=function(t,e){document.cookie=t+"="+escape(e)},cookieFn.prototype.getCookie=function(t){var e,i=new RegExp("(^| )"+t+"=([^;]*)(;|$)");return(e=document.cookie.match(i))?unescape(e[2]):null};var Tips={init:function(){this.dom=document.createElement("div"),this.dom.className="tipsOvrly",this.ovrlyWordBox=document.createElement("div"),this.ovrlyWordBox.className="ovrlyWordBox",this.ovrlyWord=document.createElement("div"),this.ovrlyWord.className="ovrlyWord",this.ovrlyWordBox.appendChild(this.ovrlyWord),this.dom.appendChild(this.ovrlyWordBox),document.body.appendChild(this.dom)},show:function(t){var e=this;t&&(this.setContent(t),e.dom.classList.add("tipsOvrlyShow"),setTimeout(function(){e.hide()},1900))},hide:function(){this.dom.classList.remove("tipsOvrlyShow")},setContent:function(t){this.ovrlyWord.innerHTML=t}},Loading={init:function(){this.dom=document.createElement("div"),this.dom.className="loadingDiv hidden",document.body.appendChild(this.dom)},show:function(){this.dom.classList.add("show"),this.dom.classList.remove("hidden")},hide:function(){this.dom.classList.add("hidden"),this.dom.classList.remove("show")}},applyClearCookie=["lenderId","lenderName","customName","customNameNoVIP","customRate","customAnnaulRate","customPeriod","customPeriodUnit","customPeriodAndUnit","customAmount","multipleRate","productCode"],step2ClearCookie=["lenderId","lenderName","lenderName","customName","customNameNoVIP"];!function(){var t=navigator.userAgent.toLowerCase(),e=null;(t.indexOf("iphone")>=0||t.indexOf("ipad")>=0)&&document.body.addEventListener("touchend",function(t){var i=(new Date).getTime();e=e||i+1;var n=i-e;return 500>n&&n>0?(t.preventDefault(),!1):void(e=i)},!1)}();