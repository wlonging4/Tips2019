setAppBtn(),callBackBtnCloseWeb(),setWebTitle("填写定制信息"),Tips.init(),Loading.init();var personalTailorStep1={token:getCookie("token")?getCookie("token"):"",init:function(){var e=this;e.loadData()},loadData:function(){var e=this;e.getData={appReqData:{},token:e.token},e.getData=JSON.stringify(e.getData),Loading.show(),$.ajax({url:"/webapi/custom/customUseProductList.ason",type:"get",async:!0,dataType:"JSON",cache:!1,data:{data:e.getData},success:function(t){Loading.hide(),"1"==t.code&&e.dataBind(t)},error:function(e){Loading.hide()}})},dataBind:function(e){if("1"==e.code)for(var t=[{productCode:"0",productPeriod:"请选择",productName:"",productPeriodUint:0,maxRange:"10000000",minRange:"500000",productRangeList:"null"}],a=0;a<e.data.customProList.length;a++){var o=e.data.customProList[a],n=o.productRangeList;if(0==n.length)break;for(var i=0,r=n[0].minRange,l=0;l<n.length;l++)i=n[l].maxRange>i?n[l].maxRange:i,r=n[l].minRange<r?n[l].minRange:r;t.push({productCode:o.productCode,productPeriod:o.productPeriod,productName:o.productName,productPeriodUint:o.productPeriodUint,maxRange:i,minRange:r,productRangeList:n})}var u=document.querySelector(".dialogBox");dialogBox=new Dialog({dialogBox:u,closeFn:function(){}});var s=new selectBox({wrapperClass:".js_selectBox",trigger:".js_selectVal",dialogBox:dialogBox,dialogCon:".dialogCon",dataList:t,endCallBack:function(){},initValueFn:function(){c.setMin(s.getMinRange()),c.setMax(s.getMaxRange())},changeFn:function(){c.setMin(s.getMinRange()),c.setMax(s.getMaxRange()),c.clear(),d.clear(),g.isAvailable()}}),c=new inputBox({wrapperClass:".js_inputBox",min:20,max:2e3,focusFn:function(){var e=s.getValue();return 0==e?(Tips.show("请先选择定制期限"),!1):!0},clearFn:function(){d.clear()},blurFn:function(){var e=1e4*c.getValue(),t=s.getMultipleRate(e);t=parseFloat(t),d.setValue(t.toFixed(2)),g.isAvailable()}}),d=new wordBox({wrapperClass:".js_rate_word"}),g=new stepButton({btnClass:".js_stepBtn",isAvailableFn:function(){var e=0!==s.getValue()?!0:!1,t=""!==c.getValue()?!0:!1;return e&&t?!0:!1},clickFn:function(){var e=new cookieFn({});e.cookieList=[{key:"productCode",val:s.getValue()},{key:"customPeriod",val:s.getCustomPeriod()},{key:"customPeriodUnit",val:s.getValueUnit()},{key:"customPeriodAndUnit",val:s.getText()},{key:"customAmount",val:1e4*parseInt(c.getValue())},{key:"multipleRate",val:d.getValue()}],e.setCookieList(),location.href="personalTailorEdit2.html"}});if(getCookie("productCode")){s.initValue(getCookie("productCode")),s.change();var p=getCookie("customAmount");p=p?parseInt(p)/1e4:"",c.setValue(p),d.setValue(getCookie("multipleRate")),g.isAvailable()}}};window.onload=function(){personalTailorStep1.init()};