$(document).ready(function(){var t={result:[],submitFlag:!0,bindEvent:function(){var t=this.result,e=this.verify,i=$("#submit-btn");$(document).on("change","#questions-list input[type='radio'], #questions-list input[type='checkbox']",function(){var n=$(this).attr("name"),a=n.replace(/risk/,"")-1,s=$(this).attr("type"),o=$(this).val();if("radio"==s)o=$(this).val(),t[a]=o;else{var r=$("input[name= "+n+"]:checked");t[a]="",r.length>0&&r.each(function(e,i){t[a]+=i.value})}e(t)?i.removeClass("disable"):i.addClass("disable")}),$(document).on("touchstart",".risk-xieyi",function(){var n=$(".checkIcon");n.hasClass("active")?n.removeClass("active"):n.addClass("active"),e(t)?i.removeClass("disable"):i.addClass("disable")});var n=!0;$(document).on("touchstart","#sesame-questions-shuzizhengshu-protocol",function(t){var e=$(this).attr("data-href");return n&&(n=!1,$.ajax({url:e,type:"POST",success:function(t){if(1==t.code){var e=new Modal({title:t.data.protocolTitle,wrapperClass:"dialog2",contentText:t.data.protocolContent,isClosebtn:!0});e.open()}else{var e=new Modal({wrapperClass:"dialog1",contentText:t.msg,isTipConfirm:!0});e.open()}n=!0},error:function(){n=!0}})),t.stopPropagation(),!1})},verify:function(t){for(var e=t.length,i=!0,n=0;e>n;n++)if(!t[n]){i=!1;break}return $(".checkIcon").hasClass("active")||(i=!1),i},submitAnswers:function(){var t=this,e=this.result,i=this.verify;$("#submit-btn").on("click",function(){if(!i(e))return!1;var n=[],a=$("#xinghuo-app-token").val();n=$.map(e,function(t,e){return parseInt(e+1)+"|"+t}),t.submitFlag&&$.ajax({url:"/mobile/appsesame/riskQuestionSubmit.shtml",type:"POST",data:{answer:n.join(","),token:a},success:function(e){if(1==e.code){var i={0:"未测评",1:"保守型",2:"稳健型",3:"平衡型",4:"积极型",5:"激进型"},n=e.data,a=new Modal({title:"您的风险偏好类型为",wrapperClass:"dialog4",contentText:"<div class='orangeWord'>"+i[n.riskLevel]+"</div>",isPromptbtn:!0,conisPromptText:["转入","取消"],callback:function(){var t=$("#xinghuo-app-sesameCode");location.href="xinghuo://GoToSesameInfo?sesameCode="+(t.val()||"")}});a.open()}else{var a=new Modal({wrapperClass:"dialog1",contentText:e.msg,isTipConfirm:!0});a.open()}t.submitFlag=!0},error:function(){t.submitFlag=!0}})})},init:function(){this.result.length=20,this.bindEvent(),this.submitAnswers()}};t.init();var e={submitFlag:!0,viewReport:function(){var t=this;$(".lookSignedPDF").on("click",function(){var e=$(this).attr("pdf-url");return t.submitFlag&&(t.submitFlag=!1,$.ajax({url:e,type:"GET",success:function(e){if(1==e.code)window.location.href=e.data;else{var i=new Modal({wrapperClass:"dialog1",contentText:e.msg,isTipConfirm:!0});i.open()}t.submitFlag=!0},error:function(){t.submitFlag=!0}})),!1})},init:function(){this.viewReport()}};e.init()});