<div ng-controller="pushAddController as showCase">
    <style>
        #chooseList ul{
            padding: 0;
            width: 550px;
        }
        #chooseList ul li{
            list-style: none;
            width: 100%;
            height: 30px;
            margin-bottom: 8px;
            position: relative;
        }
        #chooseList span{
            display: block;
            background: #ded7bd;
            width: 470px;
            padding-right: 20px;
            height: 30px;
            font-size: 14px;
            line-height: 30px;
            text-align: center;
            border-radius: 15px!important;
            color: #333;
        }
        #chooseList button{
            position: absolute;
            right: 81px;
            top: 1px;
            outline: none;
            border: none;
            display: block;
            width: 28px;
            height: 28px;
            border-radius: 14px!important;
            text-align: center;
            color: #ded7bd;
            background: #fff;
            font-size: 16px;
            font-weight: bolder;
        }
    </style>
    <h3 class="page-title">
        发布推送
    </h3>
    <div class="panel panel-default">
        <div class="panel-heading clearfix">
            <div class="row">
                <div class="col-lg-9 col-xs-6">
                    <span class="panel-heading-title">发布推送</span>
                </div>
            </div>
        </div>
        <div class="panel-body">
            <div class="panel-body">
                <form class="form-horizontal" id="editProjecForm">
                    <div class="form-group col-lg-12">
                        <label class="col-sm-3 control-label">推送标题 <span class="ui_red">*</span>：</label>
                        <div class="col-sm-7">
                            <input name="messageTitle" type="text" ng-model="form.messageTitle" class="form-control" placeholder="请输入消息标题" maxlength="50">
                        </div>
                    </div>

                    <div class="form-group col-lg-12">
                        <label class="col-sm-3 control-label">推送类型 <span class="ui_red">*</span>：</label>
                        <div class="col-sm-7">
                            <select name="type" ng-model="form.type" class="form-control" autocomplete="off">
                                <option value="">请选择</option>
                                <option ng-repeat="item in select.type" value="{{item.key}}" ng-selected="item.key==form.type">{{item.value}}</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group col-lg-12">
                        <label class="col-sm-3 control-label ui_right">推送范围 <span class="ui_red">*</span>：</label>
                        <div class="col-sm-7">
                            <div class="radio-list">
                                <label class="radio-inline">
                                    <input type="radio" name="scope" ng-model="form.scope" value="1">全部
                                </label>
                                <label class="radio-inline">
                                    <input type="radio" name="scope" ng-model="form.scope" value="2">个人
                                </label>
                            </div>
                        </div>
                    </div>
                    <!--添加列表人-->
                    <div class="col-lg-4 col-lg-offset-3" id="chooseList" style="padding-bottom: 20px" ng-show="form.scope==2">
                        <ul ng-if="list.choose.length">
                            <li ng-repeat="item in list.choose">
                                <span>{{item.name}} (ID:{{item.id}})</span>
                                <button class="deleteData" data-id="{{item.id}}">x</button>
                            </li>
                        </ul>
                        <a id="openModal" class="btn btn-warning btn-sm" href="javascript:;">添加</a>
                    </div>

                    <div class="form-group col-lg-12">
                        <label class="col-sm-3 control-label">推送时间 ：</label>
                        <div class="col-sm-5" style="margin-left: -15px">
                            <div class="col-sm-10">
                                <div class="input-group date form_exact_datetime">
                                    <input type="text" size="16" name="pushTime" ng-model="form.pushTime" readonly class="form-control">
                                    <span class="input-group-btn">
                                         <button class="btn default date-set" type="button"><i class="fa fa-calendar"></i></button>
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-group col-lg-12">
                        <label class="col-sm-3 control-label">推送URL ：</label>
                        <div class="col-sm-7">
                            <input name="url" type="text" ng-model="form.url" class="form-control" placeholder="请输入推送URL" maxlength="150">
                        </div>
                    </div>
                    <div class="form-group col-lg-12">
                        <label class="col-sm-3 control-label">推送内容 <span class="ui_red">*</span>：</label>
                        <div class="col-sm-7">
                            <textarea name="content " ng-model="form.content " id="intro" class="form-control" rows="4" maxlength="500" style="resize: none;"></textarea>
                        </div>
                    </div>
                </form>
                <div class="col-sm-10 ui_right">
                    <a href="javascript:;" class="btn btn-primary btn-sm" ng-click="save()">保存</a>
                    <a href="#/pushList" class="btn btn-success btn-sm">返回</a>
                </div>
            </div>
        </div>
    </div>
</div>
<!--合伙人搜索模板-->
<script type="text/ng-template" id="partnerChooseCtrl.html">
    <div class="modal-header">
        <button type="button" class="close" ng-click="close()">×</button>
        <h4 class="modal-title fn-ms">合伙人查询</h4>
    </div>
    <div class="modal-body clearfix">
        <div class="col-lg-12">
            <label class="col-sm-2 ui_right control-label" style="font-size: 14px;padding-top: 5px">合伙人姓名 </label>
            <div class="col-sm-3">
                <input name="realName" type="text" ng-model="form.realName" class="form-control" placeholder="请输入合伙人姓名" maxlength="20">
            </div>
            <label class="col-sm-2 ui_right control-label" style="font-size: 14px;padding-top: 5px">手机号 </label>
            <div class="col-sm-3">
                <input name="mobile" type="text" ng-model="form.mobile" class="form-control" placeholder="请输入手机号" maxlength="11">
            </div>
            <button class="btn btn-primary btn-sm" ng-click="search()">查询</button>
        </div>
        <div class="panel-body col-sm-12" style="font-size: 13px">
            <table datatable dt-options="vm.dtOptions" dt-columns="vm.dtColumns" dt-instance="vm.dtInstance" dt-disable-deep-watchers="true" class="row-border hover" id="dataTables"></table>
        </div>
        <div class="col-lg-12 ui_right" style="padding-top: 20px">
            <a href="javascript:;" class="btn btn-primary btn-sm" ng-click="submit()">确认</a>
            <a href="javascript:;" class="btn btn-warning btn-sm" ng-click="close()">取消</a>
        </div>
    </div>
</script>
<script>
    ComponentsPickers.init();
    $(".form_exact_datetime").datetimepicker({
        isRTL: Metronic.isRTL(),
        format: "yyyy-mm-dd hh:ii:ss",
        autoclose: true,
        todayBtn: false,
        pickerPosition: (Metronic.isRTL() ? "bottom-right" : "bottom-left"),
        minuteStep: 1,
        language:"zh-CN"
    });
</script>
